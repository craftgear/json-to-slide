<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canvas スライドアプリケーション</title>
    <link rel="stylesheet" href="slide.css" />

    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
  </head>
  <body>
    <div id="tsparticles"></div>

    <canvas id="slideCanvas"></canvas>
    <!-- <div id="slideInfo"> -->
    <!--     <span id="slideCounter">1/2</span> -->
    <!--     <div id="slideIndicators"></div> -->
    <!-- </div> -->
    <script src="slide.js" type="text/javascript"></script>
    <script>
      tsParticles.addPathGenerator("waveFloat", {
        generate: (particle) => {
          const freq1 = 0.01;
          const freq2 = 0.005;
          const amp1 = 0.5;
          const amp2 = 1.5;
          const time = Date.now() * 0.001;

          // x方向の動きは0（位置はmove.speedで制御）
          const x = 0;

          // yは上下の揺れだけ作る（相対的な上下オフセット）
          const px = particle.position?.x ?? 0;
          const y =
            Math.sin(px * freq1 + time) * amp1 +
            Math.sin(px * freq2 + time * 0.5) * amp2;

          return { x: 0, y };
        },
        init: () => {},
        update: () => {},
        reset: () => {},
      });

      tsParticles.load("tsparticles", {
        background: {
          color: "#002f4b",
        },
        particles: {
          number: { value: 60, density: { enable: true, area: 800 } },
          color: { value: "#88f0ff" },
          opacity: { value: 0.3 },
          size: {
            value: { min: 80, max: 160 },
            random: true,
            animation: { enable: true, speed: 10, sync: false },
          },
          shape: { type: "circle" },
          move: {
            enable: true,
            speed: 1, // 速度はここで指定（5は速すぎるかも）
            random: true,
            direction: "right", // 右方向に移動
            path: {
              enable: true,
              generator: "waveFloat",
            },
            outModes: {
              default: "destroy", // 画面右端を超えたら左端に戻る
            },
          },
        },
        emitters: {
          direction: "right",
          life: {
            count: 0, // 0 は無限
          },
          rate: {
            delay: 0.1,
            quantity: 1,
          },
          size: {
            width: 1,
            height: 100,
          },
          position: {
            x: -10,
            y: 100,
          },
        },
      });
    </script>
  </body>
</html>
